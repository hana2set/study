<!-- 객체지향의 사실과 오해 - 역할, 책임, 협력 관점에서 본 객체지향 
조영호 지음 -->

# 협력하는 객체들의 공동체
- 객체의 역할, 책임, 협력에 집중하라.
- 중요한건 객체끼리 어떤 메시지를 주고받고 협력하는지임

## 엘리스
- 객체는 식별 가능한 경계를 가진 모든 사물
- 객체는 상태, 행동, 식별자
  - 상태를 이용해야 세상의 복잡성을 완화하고 인지 부조화를 줄일 수 있음
  - 행동 - 객체 협력의 유일한 방법
  - 식별자 - 객체를 구분하는 속성
- 캡슐화 - 객체의 자율성을 높이고 협력을 단순하고 유연하게 만듬

<br>

#### 행동

- 중요성 - 행동 >>> 상태
  - 행동이 **객체 협력의 유일한 방법**이기 때문
  - 객체의 상태를 먼저 결정할 경우
    - 캡슐화가 힘들어짐
    - 객체가 고립됨
    - 객체의 재사용성 저하
- 객체의 행동 == 객체의 책임
  - 책임-주도 설계(RDD)로 연결


#### 객체지향은 은유

- 객체지향 != 현실의 모방 (깔끔하게 모방이라는 단어로 설명을 못함)
  - 의인화 - 현실과 다르게 능동적으로 행동함
- 객체지향은 현실 세계의 은유
  - 객체의 이름을 사용하거나 의인화 함으로 소프트웨어의 구조를 쉽게 파악하도록 도와줌
- **현실 세계를 모방해야한다는 생각이 소프트웨어 구조의 제약이 되면 안됨**

# 타입과 추상화
### 추상화
- 목적
  - **복잡성을 이해하기 쉬운 수준으로 단순화하는 것**
  - 현실의 복잡성을 이해하기 위한 인간의 인지능력, 저장능력이 현저히 부족하기 때문
- 방법
  1. 공통점은 취하고 차이점은 버리는 일반화
  2. 중요한 부분을 강조하기 위해 세부사항을 제거함
- 객체지향에서 **객체 == 추상화**

<br>

- 공통화 방안
  - 그룹화, 개념화, 분류
  - 개념화

### 객체에서의 개념
- 구성요소
  - `심볼`: 개념을 가리키는 명칭
  - `내연`: 개념의 완전한 정의
  - `외연`: 개념에 속하는 모든 객체의 집합

- 객체지향에서 분류는 핵심 부분

### 타입
- 타입은 분류를 위한 개념
- 타입은 행동을 기반으로 분류하는게 맞다!
- 일종의 추상화 도구 (현실의 복잡성을 극복하기 위함)
- 슈퍼타입 ⊃ 서브타입

<br>

- 클래스는 **타입의 구현** (클래스 역할이 더 많음)

<br>

- 동적 모델: 시간에 따라 상태가 어떻게 변하고 행동하는 지
- 정적 모델: 시간에 독립적으로 표현


# 역할, 책임, 협력

### 협력
- 도움을 요청하면 시작됨
- 특정 목적을 달성하기 위해 협력
- 객체에서 협력을 위한 유일한 방법은 **요청**(메시지)

### 책임
- 설계에서 가장 중요한 요소
- **객체의 행동**
- 요청을 받아야 수행됨
- 외부에 제공해 줄 수 있는 서비스의 목록(인터페이스)

### 역할
- 협력 안에서 구체적인 객체로 대체될 수 있는 추상적인 협력자
- **협력의 추상화**
- **동일한 책임의 수행을 의미** (행위 호환성)
- 단순성, 유연성, 재사용성 증가


## 객체지향 설계 순서
- **협력(문맥)** -> 책임(행동), 역할
- 흐름(협력)을 결정하고, 책임을 할당해야 견고하게 설계됨.
  - 협력을 고려하지 않으면 데이터나 클래스 중심의 설계가 될 가능성이 높다

### 객체지향 설계 기법
- `책임-주도 설계` ↔ 데이터-주도 설계
  - 역할, 책임, 협력에 집중할 것.
    1. 제공해야 하는 기능(책임) 파악 
    2. 더 작은 책임으로 분할
    3. 적절한 객체, 역할을 찾아 책임을 할당
    4. 객체, 역할들을 협력하게 함
- `디자인 패턴`
  - 유명한 저서, GOF의 `디자인 패턴`의 23가지 디자인 패턴
- `테스트-주도 개발`
  - 최상의 설계 프랙티스


# 책임과 메세지

### 자율적인 책임
- 객체에 자율성을 부여해야 함.
- 방법
  1. **적절하게 추상적인** 책임
     - 자율성을 보장할 만큼의 추상적 책임
     - 협력의 의도를 설명할 만큼의 구체적 책임
  2. '**무엇**'을 해야하는가를 설명
     - '어떻게'는 객체의 자율
- 어떻게 위처럼 설계할 수 있지? -> **메세지에 초점**을 두기.
  - 메세제는 객체에게 책임(행동)을 수행하게 하는 유일한 방법
- **책임의 자율성이 협력의 품질을 결정한다.**
  1. 협력을 단순하게 만듬
  2. 외부와 내부를 명확하게 분리 (내부의 변경이 외부에 영향을 미치지 않음)
  3. 협력의 대상 선택에 유연성 제공
  4. 객체의 역할을 이해하기 쉬워짐

### 메세지와 메서드
- `메세지`는 유일한 **의사소통 수단** - `무엇(what)`을 바라는지 명시
- `메서드`는 객체가 선택할 수 있는 처리 **방법** - `어떻게(how)` 처리할 지 명시
- 객체지향의 핵심은 **메세지**
  - 데이터(클래스)를 중심으로 설계할 경우 객체의 자율성을 저해함 (데이터-주도 설계)
  - 메세지를 중심으로 설계할 경우 **메세지가 수신자의 책임을 결정** (책임-주도 설계)

### 책임-주도 설계
- `What/Who 사이클`
  - **어떤 행위(What,메세지)** 를 수행할 것인지 결정 후 -> **누가(Who, 객체)** 수행할 것인지 결정
- `묻지 말고 시켜라`
  - 객체의 자율성 보장
- `메세지를 믿어라`
  - 메세지를 이해할 수 있다면 객체는 중요하지 않음.
  - 객체의 자율적인 책임 보장

### 인터페이스
- 메세지가 인터페이스 결정.
- 메세지에 집중 -> 객체의 외부와 내부가 구분됨
- `인터페이스와 구현의 분리`
  - 객체 설계시 외부와 내부의 명확한 분리를 고려해야함.
  - 캡슐화로 수행


# 객체지도
사용자의 관점(도메인)을 반영해야함 -> 객체지향이 거의 유일한 모델링 패러다임 (연결완전성, 표현적 차이)

- 소프트웨어의 중요한 두가지 측면
  - 기능
    - **사용자의 목표**를 만족시키기 위해 책임을 수행하는 행위
    - 불안정한 재료
    - 유스케이스
  - 구조
    - **도메인**에 관해 생각하는 개념과 개념들 간의 관계
    - 안정적인 재료
    - 도메인 모델
- 변경에 대한 파급력을 낮추기 위해, 안정적인 구조 안에 불안정한 기능을 담아야함
- 즉, **도메인 모델을 기반으로 객체 구조를 설계해야 한다**
- ~= 객체지향적 설계
  
> 유스케이스의 특성
> 1. 상호작용을 보여주는 "텍스트" (그림이 아님)
> 2. 여러 시나리오의 집합
> 3. 단순한 피처 목록이 아닌, 연관 기능들의 묶음
> 4. 사용자 인터페이스 설계 미포함
> 5. 내부 설계 미포함
>
> 설계 기법도, 객체지향 기법도 아니므로 설계에 영감을 주는 간단한 힌트만 있을 뿐, **도메인 모델을 구축할 수 있는 정보가 포함되어 있다고 생각하면 안됨!**


# 함께 모으기
- 객체지향 설계에 존재하는 3가지 관점 (마티 파울러ㅡ TML Distilled)
  - 개념 관점 - 도메인 안에 존재하는 개념과 개념 사이 관계들
  - 명세 관점 - 객체 사이 관계 **(클래스의 안정적인 측면)**
  - 구현 관점 - 실제 구현 **(클래스의 불안정한 측면)**
- 순서가 아닌, 클래스를 바라보는 세가지 관점.
- **명세 관점이 설계를 주도해야함**

![image](https://github.com/hana2set/study/assets/97689567/6dba426c-e33f-41df-9663-fd56770903c8)


# 추상화 기법
- `분류와 인스턴스화`
  - 공통적인 특성을 기반으로 범주를 형성 (**다형성**)
  - 타입
    - 동적 분류 -> 타입변경 가능
    - 단순함을 위해 동적,다중 분류보다 단일, 정적 분류로 선택하는 것이 현명
- `일반화와 특수화`
  - 범주 사이의 차이를 숨기고 공통적인 특성을 강조 (**상속**)
  - 범주 -> 개념, 개념 -> 타입
- `집합과 분해` 
  - 세부사항을 숨기고 전체를 형성 (**패키징, 모듈화**)
  - 객체를 분해하고 협력관계를 구성